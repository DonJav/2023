<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="https://getnelson.io/favicon.ico?" type="image/x-icon">

    <meta name="generator" content="Hugo 0.48" />

    <title>Nelson – Cloud-native container deployment</title>

    <link href="https://getnelson.io/css/material.min.css?733d48b36a5a1525373b0793df6e0451" rel="stylesheet">
    
    <link href="https://getnelson.io/css/nelson.css?3a064e3949254d435b486b8f157db3aa" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Barlow:300,600|Open+Sans:300" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
</head>


  <body>
    
    
<nav class="navbar navbar-expand-sm navbar-light bg-blue-5">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img src="/img/nelson-without-background.svg?sanitize=true" width="30" height="30" class="d-inline-block align-top" alt="" />
      &nbsp;
      Nelson
    </a>
    <ul class="navbar-nav mr-auto">
      
      
      <li class="nav-item ">
        <a class="nav-link" href="/introduction/">Introduction</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="/getting-started/">Getting Started</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="/documentation/">Documentation</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="https://github.com/getnelson/nelson">Code</a>
      </li>
      
      <li class="nav-item ">
        <a class="nav-link" href="/api/">API</a>
      </li>
      
    </ul>
  </div>
</nav>
    

    <main role="main">

      <div class="container primary">
        <div class="row">
          <aside class="col-md-3">
  <ol>
    
    
        
            <li class="">
              <a href="/introduction/" class="">Introduction</span></a>
              <ol class="sub-menu">
                  
                      <li class="">
                          <a href="/introduction/use-case.html">Use Cases</a>
                      </li>
                  
                      <li class="">
                          <a href="/introduction/architecture.html">Architecture</a>
                      </li>
                  
                      <li class="">
                          <a href="/introduction/competitors.html">Competitors</a>
                      </li>
                  
              </ol>
            </li>
        
    
        
            <li class="active">
              <a href="/getting-started/index.html" class="">Getting Started</span></a>
              <ol class="sub-menu">
                  
                      <li class="">
                          <a href="/getting-started/install.html">Install</a>
                      </li>
                  
                      <li class="">
                          <a href="/getting-started/first-use.html">First Use</a>
                      </li>
                  
                      <li class="">
                          <a href="/getting-started/deployables.html">Deployables</a>
                      </li>
                  
                      <li class="highlight">
                          <a href="/getting-started/blueprints.html">Blueprints</a>
                      </li>
                  
                      <li class="">
                          <a href="/getting-started/lifecycle.html">Lifecycle</a>
                      </li>
                  
                      <li class="">
                          <a href="/getting-started/routing.html">Routing</a>
                      </li>
                  
                      <li class="">
                          <a href="/getting-started/next.html">Further Reading</a>
                      </li>
                  
              </ol>
            </li>
        
    
        
            <li class="">
              <a href="/documentation/" class="">Documentation</span></a>
              <ol class="sub-menu">
                  
                      <li class="">
                          <a href="/documentation/cli.html">Command Line</a>
                      </li>
                  
                      <li class="">
                          <a href="/documentation/configuration.html">Configuration</a>
                      </li>
                  
                      <li class="">
                          <a href="/documentation/manifest.html">Manifest Settings</a>
                      </li>
                  
                      <li class="">
                          <a href="/documentation/blueprints.html">Blueprint Settings</a>
                      </li>
                  
                      <li class="">
                          <a href="/documentation/operator.html">Operator Guide</a>
                      </li>
                  
                      <li class="">
                          <a href="/documentation/api.html">REST API</a>
                      </li>
                  
                      <li class="">
                          <a href="/documentation/contributing.html">Contributing</a>
                      </li>
                  
                      <li class="">
                          <a href="/documentation/credits.html">Credits</a>
                      </li>
                  
              </ol>
            </li>
        
    
</ol>
</aside>

          <article class="col-md-9">
            <h1>Blueprints</h1>

            
            <p>The <em>Nelson</em> manifest enables the user to focus primarily on their own application and not worry about the specifics of runtime scheduling. Whilst this can be largely beneficial, it also presents a set of challenges as more often than not every organization has a different internal process with slight differences. To accommodate this, <em>Nelson</em> supports the concept of <code>Workflow</code> and <code>Blueprint</code>.</p>
            

            

            
            <hr />
            

            

<p>A <code>Blueprint</code> is a scheduler specification (for example, Kubernetes YAML document(s) or Nomad HCL) mustache template, which at deploy-time <em>Nelson</em> will interpolate with the runtime data (e.g. <code>StackName</code>), and submit that rendered output to the scheduler API in order to launch a stack. Whilst the author would hope that this powerful tool is carefully used, it provides the operators / admins of <em>Nelson</em> the flexibility to create deployment stacks that use whatever runtime setup they want. For example, Company X might wish to run their logging and routing as sidecars, with Kubernetes pods using particular node affinity, whereas Company Y might want to instead just use node selectors for deployments and rely on some node global configuration. <em>Nelson</em> simply does not care. Consider the following Kubernetes Blueprint snippet as an example:</p>

<pre><code>[...]
{{#ports}}
ports:
{{#ports_list}}
- name: {{port_name}}
  containerPort: {{port_number}}
{{/ports_list}}
{{/ports}}
[...]
</code></pre>

<p>Here, the blueprint enumerates the <code>port_list</code> defined in the supplied Nelson Manifest, translating that definition into the Kubernetes &ldquo;pod spec&rdquo; definition of container ports. Please <a href="/documentation/blueprints.html">see the reference section</a> for more information about Blueprint templating scheme and the variables that are available for interpolation.</p>

<h2 id="workflows">Workflows</h2>

<p>A <code>Workflow</code> codifies the steps needed to interact with a given scheduling system (and related systems) to get a production-ready deployment. For example, consider the steps below we might manually take to create a deployment:</p>

<ul>
<li><p>Create a stack-specific service account</p></li>

<li><p>Create a Vault auth principle for stack service account</p></li>

<li><p>Render blueprint and send to the scheduler</p></li>

<li><p>Wait for the stack to become ready</p></li>

<li><p>Setup alerting rules in Prometheus</p></li>
</ul>

<p>It is these kinds of actions and steps, when viewed together, that makeup a workflow. There is never just a single system involved in operational orchestration. At the time of writing, Nelson supports a set of different workflows that support different runtime features:</p>

<table class="table table-striped">
  <thead>
    <tr>
      <td align="center"><strong>&nbsp;</strong></td>
      <td align="center"><strong>canopus</strong></td>
      <td align="center"><strong>pulsar</strong></td>
      <td align="center"><strong>magnetar</strong></td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><i>Docker</i></td>
      <td align="center">✓</td>
      <td align="center">✓</td>
      <td align="center">✓</td>
    </tr>
    <tr>
      <td><i>Nomad</i></td>
      <td></td>
      <td></td>
      <td align="center">✓</td>
    </tr>
    <tr>
      <td><i>Kubernetes</i></td>
      <td align="center">✓</td>
      <td align="center">✓</td>
      <td></td>
    </tr>
    <tr>
      <td><i>Vault</i></td>
      <td></td>
      <td align="center">✓</td>
      <td align="center">✓</td>
    </tr>
    <tr>
      <td><i>Discovery</i></td>
      <td></td>
      <td align="center">✓</td>
      <td align="center">✓</td>
    </tr>
    <tr>
      <td><i>Traffic Shifting</i></td>
      <td></td>
      <td align="center">✓</td>
      <td align="center">✓</td>
    </tr>
    <tr>
      <td><i>Prometheus</i></td>
      <td></td>
      <td></td>
      <td align="center">✓</td>
    </tr>
  </tbody>
</table>

<p>At the time of writing, Workflows are codified inside of the Nelson codebase, however, this may change in future versions of Nelson to make it easier to customize without requiring a source change.</p>

<p>For more information on Blueprints, please <a href="/documentation/blueprints.html">checkout the reference</a>.</p>

<p>For the latest development news, please visit the <a href="https://gitter.im/getnelson/nelson">Gitter channel</a>.</p>

          </article>

        </div>
      </div>

    </main>

    
<div class="jumbotron bg-dark">
  <footer class="container">
    <div class="row">
      <div class="col-md-8 offset-md-2">
        <p>
          Built with &hearts; by the Nelson engineering team.
        </p>
        <p>
          Currently v
                    0.16.185
                  
          &middot; <a href="https://github.com/getnelson/nelson">GitHub</a>
          &middot; <a href="https://github.com/getnelson/nelson/issues">Issues</a>
          &middot; <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache 2.0</a>
          &middot; <script type="text/javascript" src="/js/contact.js"></script>
        </p>
      </div>
    </div>
  </footer>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-57263411-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-57263411-7');
</script>
<script src="/js/material.min.js?f169e95b4b249a43df0c80af2840160d"></script>

<script src="/js/nelson.js?06383353d8a0c0fa25227d61c4da0794"></script>


  </body>
</html>
